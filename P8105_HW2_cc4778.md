P8105_HW2_cc4778
================
Chee Kay Cheong

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
    ## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
    ## ✔ tibble  3.1.8     ✔ dplyr   1.0.9
    ## ✔ tidyr   1.2.1     ✔ stringr 1.4.1
    ## ✔ readr   2.1.2     ✔ forcats 0.5.2
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

# Problem 1

``` r
subway_data = read_csv("./Data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line:entry, vending, ada) %>%
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

I created a new dataset called ‘`subway_data`’ that consists of 19
variables (columns) and 1868 observations (rows) which were extracted
from the original csv datafile
‘`NYC_Transit_Subway_Entrance_And_Exit_Data.csv`’. So far, I have only
cleaned the variable names by making them all lowercase, and I changed
the variable type for `entry` from character to logical.

The 19 variables in this dataset are:

-   `line` (character)
-   `station_name` (character)
-   `station_latitude` (numeric)
-   `station_longitude` (numeric)
-   `route1` to `route7` (character) \<- 7 variables here
-   `route8` to `route11` (numeric) \<- 4 variables here
-   `entrance_type` (character)
-   `entry` (logical)
-   `vending` (character)
-   `ada` (logical)

As we can see from the variables and their types, this dataset is not
tidy enough. Not all “routes” are character vectors; some routes are
numeric. Also, it seems like all the routes should be combined into one
variable.

##### Questions

Q1: How many distinct stations are there?

A1: **465**

``` r
subway_data %>% 
  select(station_name, line) %>% 
  distinct()
## # A tibble: 465 × 2
##    station_name             line    
##    <chr>                    <chr>   
##  1 25th St                  4 Avenue
##  2 36th St                  4 Avenue
##  3 45th St                  4 Avenue
##  4 53rd St                  4 Avenue
##  5 59th St                  4 Avenue
##  6 77th St                  4 Avenue
##  7 86th St                  4 Avenue
##  8 95th St                  4 Avenue
##  9 9th St                   4 Avenue
## 10 Atlantic Av-Barclays Ctr 4 Avenue
## # … with 455 more rows
```

Q2: How many stations are ADA compliant?

A2: **84**

``` r
subway_data %>%
  filter(ada == TRUE) %>% 
  select(station_name, line) %>% 
  distinct()
## # A tibble: 84 × 2
##    station_name                   line           
##    <chr>                          <chr>          
##  1 Atlantic Av-Barclays Ctr       4 Avenue       
##  2 DeKalb Av                      4 Avenue       
##  3 Pacific St                     4 Avenue       
##  4 Grand Central                  42nd St Shuttle
##  5 34th St                        6 Avenue       
##  6 47-50th Sts Rockefeller Center 6 Avenue       
##  7 Church Av                      6 Avenue       
##  8 21st St                        63rd Street    
##  9 Lexington Av                   63rd Street    
## 10 Roosevelt Island               63rd Street    
## # … with 74 more rows
```

Q3: What proportion of station entrances / exits without vending allow
entrance?

A3: **37.7%** of station entrances are not vending allowed.

``` r
subway_data %>% 
  filter(vending == "NO") %>%
  pull(entry) %>% 
  mean
## [1] 0.3770492
```

*Reformat data so that route number and route name are distinct
variables.*

``` r
subway_data %>% 
  pivot_longer(
    cols = starts_with("route"),
    names_to = "route_number",
    values_to = "route",
    values_transform = list(route = as.character)) %>% 
  filter(route == "A") %>% 
  select(station_name, line, route) %>% 
  distinct()
## # A tibble: 60 × 3
##    station_name                  line            route
##    <chr>                         <chr>           <chr>
##  1 Times Square                  42nd St Shuttle A    
##  2 125th St                      8 Avenue        A    
##  3 145th St                      8 Avenue        A    
##  4 14th St                       8 Avenue        A    
##  5 168th St - Washington Heights 8 Avenue        A    
##  6 175th St                      8 Avenue        A    
##  7 181st St                      8 Avenue        A    
##  8 190th St                      8 Avenue        A    
##  9 34th St                       8 Avenue        A    
## 10 42nd St                       8 Avenue        A    
## # … with 50 more rows

subway_data %>%
  pivot_longer(
    cols = starts_with("route"),
    names_to = "route_number",
    values_to = "route",
    values_transform = list(route = as.character)) %>% 
  filter(route == "A", ada == TRUE) %>% 
  select(station_name, line, route, ada) %>% 
  distinct()
## # A tibble: 17 × 4
##    station_name                  line             route ada  
##    <chr>                         <chr>            <chr> <lgl>
##  1 14th St                       8 Avenue         A     TRUE 
##  2 168th St - Washington Heights 8 Avenue         A     TRUE 
##  3 175th St                      8 Avenue         A     TRUE 
##  4 34th St                       8 Avenue         A     TRUE 
##  5 42nd St                       8 Avenue         A     TRUE 
##  6 59th St                       8 Avenue         A     TRUE 
##  7 Inwood - 207th St             8 Avenue         A     TRUE 
##  8 West 4th St                   8 Avenue         A     TRUE 
##  9 World Trade Center            8 Avenue         A     TRUE 
## 10 Times Square-42nd St          Broadway         A     TRUE 
## 11 59th St-Columbus Circle       Broadway-7th Ave A     TRUE 
## 12 Times Square                  Broadway-7th Ave A     TRUE 
## 13 8th Av                        Canarsie         A     TRUE 
## 14 Franklin Av                   Franklin         A     TRUE 
## 15 Euclid Av                     Fulton           A     TRUE 
## 16 Franklin Av                   Fulton           A     TRUE 
## 17 Howard Beach                  Rockaway         A     TRUE
```

Q4: How many distinct stations serve the A train?

A4: **60**

Q5: Of the stations that serve the A train, how many are ADA compliant?

A5: **17**

# Problem 2

Read, clean, and organize Mr. Trash Wheel dataset:

``` r
mr_trash_wheel = 
  read_excel(
    "Data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx",
    sheet = "Mr. Trash Wheel", 
    na = "") %>% 
  janitor::clean_names() %>% 
  select(dumpster:homes_powered) %>% 
  drop_na() %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls),
    trash_wheel = "Mr.")
```

Read, clean, and organize Professor Trash Wheel dataset:

``` r
prof_trash_wheel = 
  read_excel(
    "Data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", 
    sheet = "Professor Trash Wheel", 
    na = "") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls),
    trash_wheel = "Professor")
```

Combine Mr. Trash Wheel and Professor Trash Wheel into one dataset:

``` r
trash_wheels = 
  full_join(mr_trash_wheel, prof_trash_wheel, by = "trash_wheel") %>% 
  janitor::clean_names()
```

I have added a new variable `trash_wheel` in both datasets before
combining them, so that I know which data belongs to which dataset.
After combining the two datasets into one dataset named `trash_wheels`,
there are 29 variables and 524 observations. I used `full_join` to keep
all the data in both datasets. In this new dataset `trash_wheels`, the
original variable names have been modified such that an “x” has been
added to the end of all variable names for `mr.trash_wheel`, whereas a
“y” has been added to the end of all variable names for
`prof_trash_wheel`. Since the `dumpster` variable in both datasets are
not the same type (Mr. Trash Wheel is character, but Professor Trash
Wheel is numeric), extra coding steps would be needed in order to merge
the two datasets by `dumpster`, so I decided to merge them by
`trash_wheel`. Hence, in the newly merged dataset, we can see that there
are duplicated variable names (either followed by `_x` or `_y`), except
for `trash_wheel`.

Professor Trash Wheel has collected a total of 135.5 tons of trash,
while Mr. Trash Wheel has collected 856 sports balls in 2020.

# Problem 3
